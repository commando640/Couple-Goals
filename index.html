<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fahim ‚ù§Ô∏è Areen</title>

<style>
body{
margin:0;
overflow:hidden;
font-family:Arial;
background:black;
color:white;
text-align:center;
}

.screen{
position:absolute;
width:100%;
height:100%;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
}

.hidden{display:none;}

button{
padding:12px 25px;
font-size:18px;
border:none;
border-radius:25px;
background:#ff3366;
color:white;
cursor:pointer;
}

#startScreen{
background:url("couple.jpg") center/cover no-repeat;
}

#overlay{
position:absolute;
width:100%;
height:100%;
background:rgba(0,0,0,0.6);
}

#gameCanvas{
background:linear-gradient(#ff9a9e,#fad0c4);
display:block;
}

#puzzleBoard{
display:grid;
grid-template-columns:repeat(3,100px);
gap:2px;
}

.piece{
width:100px;
height:100px;
background-size:300px 300px;
}

#finalScreen{
background:url("couple.jpg") center/cover no-repeat;
}

#finalOverlay{
position:absolute;
width:100%;
height:100%;
background:rgba(0,0,0,0.7);
}
</style>
</head>

<body>

<!-- BGM -->
<audio id="bgm" loop>
<source src="bgm.mp3" type="audio/mpeg">
</audio>

<!-- START -->
<div id="startScreen" class="screen">
<div id="overlay"></div>
<div style="z-index:2">
<h1>Fahim ‚ù§Ô∏è Areen</h1>
<button onclick="startGame()">Start Our Love Journey</button>
</div>
</div>

<!-- GAME -->
<canvas id="gameCanvas" class="hidden"></canvas>

<!-- PUZZLE -->
<div id="puzzleScreen" class="screen hidden">
<h2>Complete Our Memory üíï</h2>
<div id="puzzleBoard"></div>
</div>

<!-- FINAL -->
<div id="finalScreen" class="screen hidden">
<div id="finalOverlay"></div>
<div style="z-index:2;max-width:80%">
<h2>Areen üíñ</h2>
<p>I don't want a perfect love story.<br>
I just want you. Forever.<br><br>
‚Äì Fahim ‚ù§Ô∏è</p>
</div>
</div>

<script>

let canvas=document.getElementById("gameCanvas");
let ctx=canvas.getContext("2d");
let playerImg=new Image();
playerImg.src="fahim.png";

let hearts=[];
let score=0;
let playerX=0;
let animationId;

function resizeCanvas(){
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
playerX=canvas.width/2-40;
}
window.addEventListener("resize",resizeCanvas);

function startGame(){
document.getElementById("startScreen").classList.add("hidden");
canvas.classList.remove("hidden");

resizeCanvas();

let music=document.getElementById("bgm");
music.volume=0.6;
music.play().catch(()=>{});

score=0;
hearts=[];
playerImg.onload=function(){
gameLoop();
}
}

function spawnHeart(){
hearts.push({
x:Math.random()*canvas.width,
y:-20,
speed:2+Math.random()*3
});
}
setInterval(spawnHeart,800);

function gameLoop(){
ctx.clearRect(0,0,canvas.width,canvas.height);

ctx.drawImage(playerImg,playerX,canvas.height-100,80,80);

for(let i=hearts.length-1;i>=0;i--){
let h=hearts[i];
h.y+=h.speed;

ctx.fillStyle="red";
ctx.beginPath();
ctx.arc(h.x,h.y,10,0,Math.PI*2);
ctx.fill();

if(h.y>canvas.height-100 && 
h.x>playerX && 
h.x<playerX+80){
score++;
hearts.splice(i,1);
}

if(h.y>canvas.height){
hearts.splice(i,1);
}
}

ctx.fillStyle="black";
ctx.font="20px Arial";
ctx.fillText("Score: "+score,20,30);

if(score>=10){
cancelAnimationFrame(animationId);
canvas.classList.add("hidden");
startPuzzle();
return;
}

animationId=requestAnimationFrame(gameLoop);
}

document.addEventListener("mousemove",e=>{
playerX=e.clientX-40;
if(playerX<0)playerX=0;
if(playerX>canvas.width-80)playerX=canvas.width-80;
});

document.addEventListener("touchmove",e=>{
playerX=e.touches[0].clientX-40;
if(playerX<0)playerX=0;
if(playerX>canvas.width-80)playerX=canvas.width-80;
});

/* PUZZLE */

function startPuzzle(){
document.getElementById("puzzleScreen").classList.remove("hidden");
let board=document.getElementById("puzzleBoard");
board.innerHTML="";

let positions=[0,1,2,3,4,5,6,7,8];
positions.sort(()=>Math.random()-0.5);

positions.forEach(pos=>{
let piece=document.createElement("div");
piece.className="piece";
piece.style.backgroundImage="url('puzzle.jpg')";
piece.style.backgroundPosition=
(- (pos%3)*100)+"px "+(-Math.floor(pos/3)*100)+"px";
board.appendChild(piece);
});

board.onclick=function(){
document.getElementById("puzzleScreen").classList.add("hidden");
document.getElementById("finalScreen").classList.remove("hidden");
}
}

</script>

</body>
</html>
